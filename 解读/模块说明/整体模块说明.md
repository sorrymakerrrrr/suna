# Kortix 项目模块说明

## 项目概述

Kortix 是一个开源的 AI 智能体平台，用于构建、管理和训练自主 AI 智能体。该项目包含了完整的智能体开发生态系统，从前端界面到后端服务，从 SDK 到文档，为用户提供了全方位的 AI 智能体解决方案。

## 🏗️ 核心架构模块

### 📁 `backend/` - 后端服务核心
**作用**: 提供 AI 智能体平台的核心后端服务

#### 主要子模块:
- **`agent/`** - 智能体核心逻辑
  - `api.py` - 智能体 API 接口 (157KB)
  - `prompt.py` - 智能体提示词管理 (65KB)
  - `gemini_prompt.py` - Gemini 模型专用提示词 (80KB)
  - `agent_builder_prompt.py` - 智能体构建器提示词 (23KB)
  - `run.py` - 智能体运行逻辑 (34KB)
  - `tools/` - 智能体工具集
  - `suna/` - Suna 旗舰智能体实现

- **`services/`** - 核心服务模块
  - `api_keys.py` - API 密钥管理服务 (20KB)
  - `billing.py` - 计费服务 (88KB)
  - `llm.py` - 大语言模型集成服务 (15KB)
  - `supabase.py` - Supabase 数据库服务
  - `redis.py` - Redis 缓存服务
  - `email.py` - 邮件服务
  - `transcription.py` - 转录服务

- **`agentpress/`** - 智能体发布平台
- **`admin/`** - 管理后台功能
- **`composio_integration/`** - Composio 集成模块
- **`credentials/`** - 凭证管理
- **`flags/`** - 功能标志管理
- **`knowledge_base/`** - 知识库管理
- **`mcp_module/`** - MCP (Model Context Protocol) 模块
- **`pipedream/`** - Pipedream 工作流集成
- **`sandbox/`** - 安全沙箱环境
- **`supabase/`** - Supabase 配置和迁移
- **`templates/`** - 模板管理
- **`triggers/`** - 触发器管理
- **`utils/`** - 工具函数库

#### 核心文件:
- `api.py` - 主要 API 路由 (7KB)
- `run_agent_background.py` - 后台智能体运行器 (18KB)
- `worker_health.py` - 工作进程健康检查
- `pyproject.toml` - Python 项目配置
- `Dockerfile` - Docker 容器配置

### 📁 `frontend/` - 前端用户界面
**作用**: 提供用户友好的 Web 界面，用于管理和交互智能体

#### 主要结构:
- **`src/`** - 源代码目录
  - `app/` - Next.js 应用路由
  - `components/` - React 组件库
  - `contexts/` - React 上下文管理
  - `hooks/` - 自定义 React Hooks
  - `lib/` - 工具库和配置
  - `providers/` - 服务提供者
  - `middleware.ts` - 中间件配置

#### 技术栈:
- Next.js/React - 前端框架
- TypeScript - 类型安全
- Tailwind CSS - 样式框架
- 现代化 UI 组件库

### 📁 `sdk/` - 软件开发工具包
**作用**: 为开发者提供构建自定义智能体的 SDK

#### 核心模块:
- **`kortix/`** - Kortix SDK 核心
  - `agent.py` - 智能体基础类 (5KB)
  - `models.py` - 数据模型定义
  - `thread.py` - 线程管理
  - `tools.py` - 工具接口
  - `utils.py` - SDK 工具函数 (12KB)
  - `api/` - API 客户端

- **`example/`** - SDK 使用示例
- `README.md` - SDK 使用文档

## 🔧 配置和部署模块

### 📁 `docs/` - 文档中心
**作用**: 提供项目文档和部署指南

- `SELF-HOSTING.md` - 自托管部署指南 (8KB)
- `images/` - 文档图片资源

### 📄 配置文件
- **`setup.py`** - 自动化安装向导 (56KB)
  - 14 步安装流程
  - 进度保存和恢复
  - 环境变量配置
  - 服务集成设置

- **`start.py`** - 平台启动脚本 (6KB)
- **`docker-compose.yaml`** - Docker 编排配置
- **`mise.toml`** - 开发环境配置

## 🔗 集成和扩展模块

### 外部服务集成
项目支持多种外部服务集成:

1. **数据库和存储**
   - Supabase - 主数据库和认证
   - Redis - 缓存和会话管理

2. **AI 模型提供商**
   - OpenAI - GPT 系列模型
   - Anthropic - Claude 系列模型
   - Google - Gemini 模型
   - OpenRouter - 多模型路由
   - Morph - 专业模型

3. **搜索和爬虫**
   - Tavily - 智能搜索
   - Firecrawl - 网页爬取

4. **工作流和自动化**
   - Pipedream - 工作流自动化
   - Composio - 工具集成
   - Webhook - 事件触发

5. **通信和协作**
   - Slack - 团队协作集成
   - Email - 邮件通知

## 🚀 核心功能特性

### 智能体能力
- **浏览器自动化** - 网页导航、数据提取、表单填写
- **文件管理** - 文档创建、编辑、组织
- **Web 智能** - 网页爬取、搜索、数据合成
- **系统操作** - 命令行执行、系统管理
- **API 集成** - 外部服务连接和跨平台工作流

### 平台功能
- **智能体构建器** - 可视化配置和部署工具
- **对话界面** - 自然语言交互
- **工作流管理** - 复杂任务编排
- **监控和分析** - 实时性能监控
- **安全沙箱** - 隔离执行环境

## 📊 项目统计

- **总代码量**: 超过 1MB 的核心代码
- **主要语言**: Python (后端), TypeScript/JavaScript (前端)
- **架构模式**: 微服务架构，前后端分离
- **部署方式**: Docker 容器化部署
- **数据库**: PostgreSQL (通过 Supabase)
- **缓存**: Redis
- **前端框架**: Next.js 14+ with App Router

## 🎯 使用场景

### Suna - 通用 AI 工作者
- 研究和分析
- 浏览器自动化
- 文档管理
- 数据处理
- 系统管理

### 自定义智能体
- 客户服务智能体
- 内容创作智能体
- 销售和营销智能体
- 研发智能体
- 行业专用智能体

## 🔄 开发工作流

1. **环境设置** - 使用 `setup.py` 自动配置
2. **开发调试** - 本地开发环境支持
3. **测试部署** - Docker 容器化测试
4. **生产部署** - 自托管或云部署
5. **监控维护** - 实时监控和日志分析

这个模块化的架构设计使得 Kortix 平台具有高度的可扩展性和可维护性，为构建强大的 AI 智能体提供了完整的基础设施。
